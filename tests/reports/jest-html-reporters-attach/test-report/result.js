window.jest_html_reporters_callback__({"numFailedTestSuites":9,"numFailedTests":81,"numPassedTestSuites":1,"numPassedTests":60,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":3,"numTodoTests":0,"numTotalTestSuites":10,"numTotalTests":141,"startTime":1767388726446,"success":false,"testResults":[{"numFailingTests":11,"numPassingTests":5,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1767388727145,"loadTestEnvironmentEnd":1767388726461,"loadTestEnvironmentStart":1767388726450,"runtime":683,"setupAfterEnvEnd":1767388726494,"setupAfterEnvStart":1767388726493,"setupFilesEnd":1767388726462,"setupFilesStart":1767388726462,"slow":false,"start":1767388726462},"testFilePath":"/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/payment-service.test.js","failureMessage":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPaymentService › createPaymentIntent › should successfully create a payment intent\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'toString')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 170 |\u001b[39m                 name\u001b[33m:\u001b[39m client\u001b[33m.\u001b[39mcompanyName\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 171 |\u001b[39m                 metadata\u001b[33m:\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 172 |\u001b[39m                     clientId\u001b[33m:\u001b[39m client\u001b[33m.\u001b[39m_id\u001b[33m.\u001b[39mtoString()\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 173 |\u001b[39m                     clientCode\u001b[33m:\u001b[39m client\u001b[33m.\u001b[39mclientCode\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 174 |\u001b[39m                     tenantId\u001b[33m:\u001b[39m client\u001b[33m.\u001b[39mtenantId\u001b[33m.\u001b[39mtoString()\u001b[22m\n\u001b[2m     \u001b[90m 175 |\u001b[39m                 }\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat PaymentService.toString [as ensureStripeCustomer] (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing-management/services/payment-service.js\u001b[2m:172:42)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat PaymentService.ensureStripeCustomer [as createPaymentIntent] (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing-management/services/payment-service.js\u001b[2m:231:47)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/payment-service.test.js\u001b[39m\u001b[0m\u001b[2m:118:22)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPaymentService › confirmPayment › should successfully confirm a payment\u001b[39m\u001b[22m\n\n    Invalid API Key provided: sk_test_****************ting\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat res.toJSON.then.Error_js_1.StripeAPIError.message (\u001b[22m\u001b[2mservers/customer-services/node_modules/stripe/cjs/RequestSender.js\u001b[2m:102:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPaymentService › confirmPayment › should throw error when payment is not found\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected substring: \u001b[32m\"Payment not found\"\u001b[39m\n    Received message:   \u001b[31m\"Invalid API Key provided: sk_test_****************ting\"\u001b[39m\n\n          \u001b[2mat res.toJSON.then.Error_js_1.StripeAPIError.message (\u001b[22mservers/customer-services/node_modules/stripe/cjs/RequestSender.js\u001b[2m:102:31)\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 203 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m     \u001b[90m 204 |\u001b[39m         paymentService\u001b[33m.\u001b[39mconfirmPayment(paymentId)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 205 |\u001b[39m       )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Payment not found'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 206 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 207 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 208 |\u001b[39m     it(\u001b[32m'should throw error when payment is already succeeded'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toThrow (\u001b[22m\u001b[2mnode_modules/expect/build/index.js\u001b[2m:2155:20)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/payment-service.test.js\u001b[39m\u001b[0m\u001b[2m:205:17)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPaymentService › processRefund › should successfully process a refund\u001b[39m\u001b[22m\n\n    AppError: Transaction is not refundable\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 944 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 945 |\u001b[39m     \u001b[36mstatic\u001b[39m validation(message\u001b[33m,\u001b[39m errors \u001b[33m=\u001b[39m []\u001b[33m,\u001b[39m options \u001b[33m=\u001b[39m {}) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 946 |\u001b[39m         \u001b[36mreturn\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAppError\u001b[39m(message\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 947 |\u001b[39m             \u001b[33m...\u001b[39moptions\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 948 |\u001b[39m             code\u001b[33m:\u001b[39m \u001b[33mErrorCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mVALIDATION_FAILED\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 949 |\u001b[39m             statusCode\u001b[33m:\u001b[39m \u001b[35m422\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat AppError.validation (\u001b[22m\u001b[2mshared/lib/utils/app-error.js\u001b[2m:946:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat PaymentService.validation [as processRefund] (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing-management/services/payment-service.js\u001b[2m:587:32)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/payment-service.test.js\u001b[39m\u001b[0m\u001b[2m:260:22)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPaymentService › getPaymentById › should successfully retrieve a payment by ID\u001b[39m\u001b[22m\n\n    TypeError: paymentService.getPaymentById is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 325 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 326 |\u001b[39m       \u001b[90m// Act\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 327 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m paymentService\u001b[33m.\u001b[39mgetPaymentById(paymentId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 328 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 329 |\u001b[39m       \u001b[90m// Assert\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 330 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/payment-service.test.js\u001b[39m\u001b[0m\u001b[2m:327:43)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPaymentService › getPaymentById › should throw error when payment is not found\u001b[39m\u001b[22m\n\n    TypeError: paymentService.getPaymentById is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 344 |\u001b[39m       \u001b[90m// Act & Assert\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 345 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 346 |\u001b[39m         paymentService\u001b[33m.\u001b[39mgetPaymentById(paymentId)\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 347 |\u001b[39m       )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Payment not found'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 348 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 349 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/payment-service.test.js\u001b[39m\u001b[0m\u001b[2m:346:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPaymentService › getPaymentsByUser › should retrieve all payments for a user\u001b[39m\u001b[22m\n\n    TypeError: paymentService.getPaymentsByUser is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 365 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 366 |\u001b[39m       \u001b[90m// Act\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 367 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m paymentService\u001b[33m.\u001b[39mgetPaymentsByUser(userId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 368 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 369 |\u001b[39m       \u001b[90m// Assert\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 370 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/payment-service.test.js\u001b[39m\u001b[0m\u001b[2m:367:43)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPaymentService › getPaymentsByUser › should filter payments by status\u001b[39m\u001b[22m\n\n    TypeError: paymentService.getPaymentsByUser is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 388 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 389 |\u001b[39m       \u001b[90m// Act\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 390 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m paymentService\u001b[33m.\u001b[39mgetPaymentsByUser(userId\u001b[33m,\u001b[39m { status })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 391 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 392 |\u001b[39m       \u001b[90m// Assert\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 393 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/payment-service.test.js\u001b[39m\u001b[0m\u001b[2m:390:43)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPaymentService › cancelPayment › should successfully cancel a payment\u001b[39m\u001b[22m\n\n    TypeError: paymentService.cancelPayment is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 422 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 423 |\u001b[39m       \u001b[90m// Act\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 424 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m paymentService\u001b[33m.\u001b[39mcancelPayment(paymentId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 425 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 426 |\u001b[39m       \u001b[90m// Assert\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 427 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/payment-service.test.js\u001b[39m\u001b[0m\u001b[2m:424:43)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPaymentService › cancelPayment › should throw error when payment is already succeeded\u001b[39m\u001b[22m\n\n    TypeError: paymentService.cancelPayment is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 444 |\u001b[39m       \u001b[90m// Act & Assert\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 445 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 446 |\u001b[39m         paymentService\u001b[33m.\u001b[39mcancelPayment(paymentId)\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 447 |\u001b[39m       )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 448 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 449 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/payment-service.test.js\u001b[39m\u001b[0m\u001b[2m:446:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPaymentService › createStripeCustomer › should successfully create a Stripe customer\u001b[39m\u001b[22m\n\n    TypeError: paymentService.createStripeCustomer is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 458 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 459 |\u001b[39m       \u001b[90m// Act\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 460 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m paymentService\u001b[33m.\u001b[39mcreateStripeCustomer(userData)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 461 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 462 |\u001b[39m       \u001b[90m// Assert\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 463 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/payment-service.test.js\u001b[39m\u001b[0m\u001b[2m:460:43)\u001b[22m\u001b[2m\u001b[22m\n","testResults":[{"ancestorTitles":["PaymentService","createPaymentIntent"],"duration":165,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'toString')\n    at PaymentService.toString [as ensureStripeCustomer] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing-management/services/payment-service.js:172:42)\n    at PaymentService.ensureStripeCustomer [as createPaymentIntent] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing-management/services/payment-service.js:231:47)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/payment-service.test.js:118:22)"],"fullName":"PaymentService createPaymentIntent should successfully create a payment intent","status":"failed","title":"should successfully create a payment intent"},{"ancestorTitles":["PaymentService","createPaymentIntent"],"duration":1,"failureMessages":[],"fullName":"PaymentService createPaymentIntent should throw error when amount is invalid","status":"passed","title":"should throw error when amount is invalid"},{"ancestorTitles":["PaymentService","createPaymentIntent"],"duration":1,"failureMessages":[],"fullName":"PaymentService createPaymentIntent should throw error when currency is invalid","status":"passed","title":"should throw error when currency is invalid"},{"ancestorTitles":["PaymentService","confirmPayment"],"duration":224,"failureMessages":["Error: Invalid API Key provided: sk_test_****************ting\n    at res.toJSON.then.Error_js_1.StripeAPIError.message (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/stripe/cjs/RequestSender.js:102:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"PaymentService confirmPayment should successfully confirm a payment","status":"failed","title":"should successfully confirm a payment"},{"ancestorTitles":["PaymentService","confirmPayment"],"duration":73,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected substring: \u001b[32m\"Payment not found\"\u001b[39m\nReceived message:   \u001b[31m\"Invalid API Key provided: sk_test_****************ting\"\u001b[39m\n\n      \u001b[2mat res.toJSON.then.Error_js_1.StripeAPIError.message (\u001b[22mservers/customer-services/node_modules/stripe/cjs/RequestSender.js\u001b[2m:102:31)\u001b[22m\n    at Object.toThrow (/Users/eolaw/Desktop/insightserenity-platform/node_modules/expect/build/index.js:2155:20)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/payment-service.test.js:205:17)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"PaymentService confirmPayment should throw error when payment is not found","status":"failed","title":"should throw error when payment is not found"},{"ancestorTitles":["PaymentService","confirmPayment"],"duration":59,"failureMessages":[],"fullName":"PaymentService confirmPayment should throw error when payment is already succeeded","status":"passed","title":"should throw error when payment is already succeeded"},{"ancestorTitles":["PaymentService","processRefund"],"duration":2,"failureMessages":["AppError: Transaction is not refundable\n    at AppError.validation (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/utils/app-error.js:946:16)\n    at PaymentService.validation [as processRefund] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing-management/services/payment-service.js:587:32)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/payment-service.test.js:260:22)"],"fullName":"PaymentService processRefund should successfully process a refund","status":"failed","title":"should successfully process a refund"},{"ancestorTitles":["PaymentService","processRefund"],"duration":1,"failureMessages":[],"fullName":"PaymentService processRefund should throw error when refund amount exceeds payment amount","status":"passed","title":"should throw error when refund amount exceeds payment amount"},{"ancestorTitles":["PaymentService","processRefund"],"duration":0,"failureMessages":[],"fullName":"PaymentService processRefund should throw error when payment is not succeeded","status":"passed","title":"should throw error when payment is not succeeded"},{"ancestorTitles":["PaymentService","getPaymentById"],"duration":0,"failureMessages":["TypeError: paymentService.getPaymentById is not a function\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/payment-service.test.js:327:43)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"PaymentService getPaymentById should successfully retrieve a payment by ID","status":"failed","title":"should successfully retrieve a payment by ID"},{"ancestorTitles":["PaymentService","getPaymentById"],"duration":0,"failureMessages":["TypeError: paymentService.getPaymentById is not a function\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/payment-service.test.js:346:24)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"PaymentService getPaymentById should throw error when payment is not found","status":"failed","title":"should throw error when payment is not found"},{"ancestorTitles":["PaymentService","getPaymentsByUser"],"duration":1,"failureMessages":["TypeError: paymentService.getPaymentsByUser is not a function\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/payment-service.test.js:367:43)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"PaymentService getPaymentsByUser should retrieve all payments for a user","status":"failed","title":"should retrieve all payments for a user"},{"ancestorTitles":["PaymentService","getPaymentsByUser"],"duration":0,"failureMessages":["TypeError: paymentService.getPaymentsByUser is not a function\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/payment-service.test.js:390:43)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"PaymentService getPaymentsByUser should filter payments by status","status":"failed","title":"should filter payments by status"},{"ancestorTitles":["PaymentService","cancelPayment"],"duration":1,"failureMessages":["TypeError: paymentService.cancelPayment is not a function\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/payment-service.test.js:424:43)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"PaymentService cancelPayment should successfully cancel a payment","status":"failed","title":"should successfully cancel a payment"},{"ancestorTitles":["PaymentService","cancelPayment"],"duration":0,"failureMessages":["TypeError: paymentService.cancelPayment is not a function\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/payment-service.test.js:446:24)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"PaymentService cancelPayment should throw error when payment is already succeeded","status":"failed","title":"should throw error when payment is already succeeded"},{"ancestorTitles":["PaymentService","createStripeCustomer"],"duration":1,"failureMessages":["TypeError: paymentService.createStripeCustomer is not a function\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/payment-service.test.js:460:43)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"PaymentService createStripeCustomer should successfully create a Stripe customer","status":"failed","title":"should successfully create a Stripe customer"}]},{"numFailingTests":14,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1767388727536,"loadTestEnvironmentEnd":1767388727168,"loadTestEnvironmentStart":1767388727166,"runtime":368,"setupAfterEnvEnd":1767388727177,"setupAfterEnvStart":1767388727177,"setupFilesEnd":1767388727168,"setupFilesStart":1767388727168,"slow":false,"start":1767388727168},"testFilePath":"/Users/eolaw/Desktop/insightserenity-platform/tests/unit/routes/consultation-routes.test.js","failureMessage":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultation Routes › POST /api/consultations/book › should create a consultation when authenticated\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/authentication/services/direct-auth-service.js\u001b[2m:30:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/middleware/auth-middleware.js\u001b[2m:9:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/routes/consultation-routes.test.js\u001b[39m\u001b[0m\u001b[2m:30:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultation Routes › POST /api/consultations/book › should apply rate limiting\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/controllers/consultation-controller.js\u001b[2m:8:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/routes/consultation-routes.test.js\u001b[39m\u001b[0m\u001b[2m:32:22)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultation Routes › POST /api/consultations/book-with-package › should book consultation with package when authenticated\u001b[39m\u001b[22m\n\n    TypeError: argument handler must be a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  95 |\u001b[39m \u001b[90m * @access Private - Consultants, Admins, Managers\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  96 |\u001b[39m \u001b[90m */\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m  97 |\u001b[39m router\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  98 |\u001b[39m     \u001b[32m'/metrics'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  99 |\u001b[39m     rateLimiter({ windowMs\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m \u001b[33m*\u001b[39m \u001b[35m60\u001b[39m \u001b[33m*\u001b[39m \u001b[35m1000\u001b[39m\u001b[33m,\u001b[39m max\u001b[33m:\u001b[39m \u001b[35m60\u001b[39m })\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m     authorize([\u001b[32m'consultant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'admin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'manager'\u001b[39m])\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Route.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/lib/route.js\u001b[2m:228:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat router.Router.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/index.js\u001b[2m:448:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js\u001b[2m:97:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/routes/consultation-routes.test.js\u001b[39m\u001b[0m\u001b[2m:152:32)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultation Routes › GET /api/consultations/me › should retrieve authenticated user's consultations\u001b[39m\u001b[22m\n\n    TypeError: argument handler must be a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  95 |\u001b[39m \u001b[90m * @access Private - Consultants, Admins, Managers\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  96 |\u001b[39m \u001b[90m */\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m  97 |\u001b[39m router\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  98 |\u001b[39m     \u001b[32m'/metrics'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  99 |\u001b[39m     rateLimiter({ windowMs\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m \u001b[33m*\u001b[39m \u001b[35m60\u001b[39m \u001b[33m*\u001b[39m \u001b[35m1000\u001b[39m\u001b[33m,\u001b[39m max\u001b[33m:\u001b[39m \u001b[35m60\u001b[39m })\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m     authorize([\u001b[32m'consultant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'admin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'manager'\u001b[39m])\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Route.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/lib/route.js\u001b[2m:228:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat router.Router.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/index.js\u001b[2m:448:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js\u001b[2m:97:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/routes/consultation-routes.test.js\u001b[39m\u001b[0m\u001b[2m:152:32)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultation Routes › GET /api/consultations/me › should require authentication\u001b[39m\u001b[22m\n\n    TypeError: argument handler must be a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  95 |\u001b[39m \u001b[90m * @access Private - Consultants, Admins, Managers\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  96 |\u001b[39m \u001b[90m */\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m  97 |\u001b[39m router\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  98 |\u001b[39m     \u001b[32m'/metrics'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  99 |\u001b[39m     rateLimiter({ windowMs\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m \u001b[33m*\u001b[39m \u001b[35m60\u001b[39m \u001b[33m*\u001b[39m \u001b[35m1000\u001b[39m\u001b[33m,\u001b[39m max\u001b[33m:\u001b[39m \u001b[35m60\u001b[39m })\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m     authorize([\u001b[32m'consultant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'admin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'manager'\u001b[39m])\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Route.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/lib/route.js\u001b[2m:228:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat router.Router.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/index.js\u001b[2m:448:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js\u001b[2m:97:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/routes/consultation-routes.test.js\u001b[39m\u001b[0m\u001b[2m:152:32)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultation Routes › GET /api/consultations/upcoming › should retrieve upcoming consultations\u001b[39m\u001b[22m\n\n    TypeError: argument handler must be a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  95 |\u001b[39m \u001b[90m * @access Private - Consultants, Admins, Managers\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  96 |\u001b[39m \u001b[90m */\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m  97 |\u001b[39m router\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  98 |\u001b[39m     \u001b[32m'/metrics'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  99 |\u001b[39m     rateLimiter({ windowMs\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m \u001b[33m*\u001b[39m \u001b[35m60\u001b[39m \u001b[33m*\u001b[39m \u001b[35m1000\u001b[39m\u001b[33m,\u001b[39m max\u001b[33m:\u001b[39m \u001b[35m60\u001b[39m })\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m     authorize([\u001b[32m'consultant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'admin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'manager'\u001b[39m])\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Route.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/lib/route.js\u001b[2m:228:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat router.Router.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/index.js\u001b[2m:448:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js\u001b[2m:97:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/routes/consultation-routes.test.js\u001b[39m\u001b[0m\u001b[2m:152:32)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultation Routes › GET /api/consultations/upcoming › should apply authorization\u001b[39m\u001b[22m\n\n    TypeError: argument handler must be a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  95 |\u001b[39m \u001b[90m * @access Private - Consultants, Admins, Managers\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  96 |\u001b[39m \u001b[90m */\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m  97 |\u001b[39m router\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  98 |\u001b[39m     \u001b[32m'/metrics'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  99 |\u001b[39m     rateLimiter({ windowMs\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m \u001b[33m*\u001b[39m \u001b[35m60\u001b[39m \u001b[33m*\u001b[39m \u001b[35m1000\u001b[39m\u001b[33m,\u001b[39m max\u001b[33m:\u001b[39m \u001b[35m60\u001b[39m })\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m     authorize([\u001b[32m'consultant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'admin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'manager'\u001b[39m])\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Route.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/lib/route.js\u001b[2m:228:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat router.Router.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/index.js\u001b[2m:448:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js\u001b[2m:97:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/routes/consultation-routes.test.js\u001b[39m\u001b[0m\u001b[2m:152:32)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultation Routes › GET /api/consultations/:consultationId › should retrieve consultation by ID\u001b[39m\u001b[22m\n\n    TypeError: argument handler must be a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  95 |\u001b[39m \u001b[90m * @access Private - Consultants, Admins, Managers\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  96 |\u001b[39m \u001b[90m */\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m  97 |\u001b[39m router\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  98 |\u001b[39m     \u001b[32m'/metrics'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  99 |\u001b[39m     rateLimiter({ windowMs\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m \u001b[33m*\u001b[39m \u001b[35m60\u001b[39m \u001b[33m*\u001b[39m \u001b[35m1000\u001b[39m\u001b[33m,\u001b[39m max\u001b[33m:\u001b[39m \u001b[35m60\u001b[39m })\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m     authorize([\u001b[32m'consultant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'admin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'manager'\u001b[39m])\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Route.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/lib/route.js\u001b[2m:228:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat router.Router.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/index.js\u001b[2m:448:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js\u001b[2m:97:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/routes/consultation-routes.test.js\u001b[39m\u001b[0m\u001b[2m:152:32)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultation Routes › PUT /api/consultations/:consultationId/cancel › should cancel a consultation\u001b[39m\u001b[22m\n\n    TypeError: argument handler must be a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  95 |\u001b[39m \u001b[90m * @access Private - Consultants, Admins, Managers\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  96 |\u001b[39m \u001b[90m */\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m  97 |\u001b[39m router\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  98 |\u001b[39m     \u001b[32m'/metrics'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  99 |\u001b[39m     rateLimiter({ windowMs\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m \u001b[33m*\u001b[39m \u001b[35m60\u001b[39m \u001b[33m*\u001b[39m \u001b[35m1000\u001b[39m\u001b[33m,\u001b[39m max\u001b[33m:\u001b[39m \u001b[35m60\u001b[39m })\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m     authorize([\u001b[32m'consultant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'admin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'manager'\u001b[39m])\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Route.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/lib/route.js\u001b[2m:228:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat router.Router.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/index.js\u001b[2m:448:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js\u001b[2m:97:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/routes/consultation-routes.test.js\u001b[39m\u001b[0m\u001b[2m:152:32)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultation Routes › PUT /api/consultations/:consultationId/complete › should complete a consultation with consultant role\u001b[39m\u001b[22m\n\n    TypeError: argument handler must be a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  95 |\u001b[39m \u001b[90m * @access Private - Consultants, Admins, Managers\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  96 |\u001b[39m \u001b[90m */\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m  97 |\u001b[39m router\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  98 |\u001b[39m     \u001b[32m'/metrics'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  99 |\u001b[39m     rateLimiter({ windowMs\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m \u001b[33m*\u001b[39m \u001b[35m60\u001b[39m \u001b[33m*\u001b[39m \u001b[35m1000\u001b[39m\u001b[33m,\u001b[39m max\u001b[33m:\u001b[39m \u001b[35m60\u001b[39m })\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m     authorize([\u001b[32m'consultant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'admin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'manager'\u001b[39m])\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Route.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/lib/route.js\u001b[2m:228:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat router.Router.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/index.js\u001b[2m:448:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js\u001b[2m:97:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/routes/consultation-routes.test.js\u001b[39m\u001b[0m\u001b[2m:152:32)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultation Routes › PUT /api/consultations/:consultationId/reschedule › should reschedule a consultation\u001b[39m\u001b[22m\n\n    TypeError: argument handler must be a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  95 |\u001b[39m \u001b[90m * @access Private - Consultants, Admins, Managers\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  96 |\u001b[39m \u001b[90m */\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m  97 |\u001b[39m router\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  98 |\u001b[39m     \u001b[32m'/metrics'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  99 |\u001b[39m     rateLimiter({ windowMs\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m \u001b[33m*\u001b[39m \u001b[35m60\u001b[39m \u001b[33m*\u001b[39m \u001b[35m1000\u001b[39m\u001b[33m,\u001b[39m max\u001b[33m:\u001b[39m \u001b[35m60\u001b[39m })\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m     authorize([\u001b[32m'consultant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'admin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'manager'\u001b[39m])\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Route.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/lib/route.js\u001b[2m:228:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat router.Router.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/index.js\u001b[2m:448:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js\u001b[2m:97:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/routes/consultation-routes.test.js\u001b[39m\u001b[0m\u001b[2m:152:32)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultation Routes › POST /api/consultations/:consultationId/feedback/client › should submit client feedback\u001b[39m\u001b[22m\n\n    TypeError: argument handler must be a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  95 |\u001b[39m \u001b[90m * @access Private - Consultants, Admins, Managers\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  96 |\u001b[39m \u001b[90m */\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m  97 |\u001b[39m router\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  98 |\u001b[39m     \u001b[32m'/metrics'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  99 |\u001b[39m     rateLimiter({ windowMs\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m \u001b[33m*\u001b[39m \u001b[35m60\u001b[39m \u001b[33m*\u001b[39m \u001b[35m1000\u001b[39m\u001b[33m,\u001b[39m max\u001b[33m:\u001b[39m \u001b[35m60\u001b[39m })\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m     authorize([\u001b[32m'consultant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'admin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'manager'\u001b[39m])\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Route.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/lib/route.js\u001b[2m:228:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat router.Router.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/index.js\u001b[2m:448:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js\u001b[2m:97:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/routes/consultation-routes.test.js\u001b[39m\u001b[0m\u001b[2m:152:32)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultation Routes › POST /api/consultations/:consultationId/notes › should add note to consultation\u001b[39m\u001b[22m\n\n    TypeError: argument handler must be a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  95 |\u001b[39m \u001b[90m * @access Private - Consultants, Admins, Managers\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  96 |\u001b[39m \u001b[90m */\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m  97 |\u001b[39m router\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  98 |\u001b[39m     \u001b[32m'/metrics'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  99 |\u001b[39m     rateLimiter({ windowMs\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m \u001b[33m*\u001b[39m \u001b[35m60\u001b[39m \u001b[33m*\u001b[39m \u001b[35m1000\u001b[39m\u001b[33m,\u001b[39m max\u001b[33m:\u001b[39m \u001b[35m60\u001b[39m })\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m     authorize([\u001b[32m'consultant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'admin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'manager'\u001b[39m])\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Route.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/lib/route.js\u001b[2m:228:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat router.Router.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/index.js\u001b[2m:448:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js\u001b[2m:97:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/routes/consultation-routes.test.js\u001b[39m\u001b[0m\u001b[2m:152:32)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultation Routes › Authorization checks › should deny access when user role is not authorized\u001b[39m\u001b[22m\n\n    TypeError: argument handler must be a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  95 |\u001b[39m \u001b[90m * @access Private - Consultants, Admins, Managers\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  96 |\u001b[39m \u001b[90m */\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m  97 |\u001b[39m router\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  98 |\u001b[39m     \u001b[32m'/metrics'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  99 |\u001b[39m     rateLimiter({ windowMs\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m \u001b[33m*\u001b[39m \u001b[35m60\u001b[39m \u001b[33m*\u001b[39m \u001b[35m1000\u001b[39m\u001b[33m,\u001b[39m max\u001b[33m:\u001b[39m \u001b[35m60\u001b[39m })\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m     authorize([\u001b[32m'consultant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'admin'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'manager'\u001b[39m])\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Route.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/lib/route.js\u001b[2m:228:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat router.Router.<computed> [as get] (\u001b[22m\u001b[2mservers/customer-services/node_modules/router/index.js\u001b[2m:448:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js\u001b[2m:97:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/routes/consultation-routes.test.js\u001b[39m\u001b[0m\u001b[2m:152:32)\u001b[22m\u001b[2m\u001b[22m\n","testResults":[{"ancestorTitles":["Consultation Routes","POST /api/consultations/book"],"duration":142,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/authentication/services/direct-auth-service.js:30:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/middleware/auth-middleware.js:9:27)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime._generateMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1463:34)\n    at Runtime.requireMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:930:39)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:962:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/routes/consultation-routes.test.js:30:26)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"Consultation Routes POST /api/consultations/book should create a consultation when authenticated","status":"failed","title":"should create a consultation when authenticated"},{"ancestorTitles":["Consultation Routes","POST /api/consultations/book"],"duration":78,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/controllers/consultation-controller.js:8:29)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime._generateMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1463:34)\n    at Runtime.requireMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:930:39)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:962:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/routes/consultation-routes.test.js:32:22)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"Consultation Routes POST /api/consultations/book should apply rate limiting","status":"failed","title":"should apply rate limiting"},{"ancestorTitles":["Consultation Routes","POST /api/consultations/book-with-package"],"duration":20,"failureMessages":["TypeError: argument handler must be a function\n    at Route.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/lib/route.js:228:15)\n    at router.Router.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/index.js:448:19)\n    at Object.get (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js:97:8)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/routes/consultation-routes.test.js:152:32)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"Consultation Routes POST /api/consultations/book-with-package should book consultation with package when authenticated","status":"failed","title":"should book consultation with package when authenticated"},{"ancestorTitles":["Consultation Routes","GET /api/consultations/me"],"duration":0,"failureMessages":["TypeError: argument handler must be a function\n    at Route.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/lib/route.js:228:15)\n    at router.Router.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/index.js:448:19)\n    at Object.get (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js:97:8)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/routes/consultation-routes.test.js:152:32)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"Consultation Routes GET /api/consultations/me should retrieve authenticated user's consultations","status":"failed","title":"should retrieve authenticated user's consultations"},{"ancestorTitles":["Consultation Routes","GET /api/consultations/me"],"duration":1,"failureMessages":["TypeError: argument handler must be a function\n    at Route.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/lib/route.js:228:15)\n    at router.Router.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/index.js:448:19)\n    at Object.get (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js:97:8)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/routes/consultation-routes.test.js:152:32)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"Consultation Routes GET /api/consultations/me should require authentication","status":"failed","title":"should require authentication"},{"ancestorTitles":["Consultation Routes","GET /api/consultations/upcoming"],"duration":0,"failureMessages":["TypeError: argument handler must be a function\n    at Route.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/lib/route.js:228:15)\n    at router.Router.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/index.js:448:19)\n    at Object.get (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js:97:8)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/routes/consultation-routes.test.js:152:32)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"Consultation Routes GET /api/consultations/upcoming should retrieve upcoming consultations","status":"failed","title":"should retrieve upcoming consultations"},{"ancestorTitles":["Consultation Routes","GET /api/consultations/upcoming"],"duration":0,"failureMessages":["TypeError: argument handler must be a function\n    at Route.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/lib/route.js:228:15)\n    at router.Router.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/index.js:448:19)\n    at Object.get (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js:97:8)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/routes/consultation-routes.test.js:152:32)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"Consultation Routes GET /api/consultations/upcoming should apply authorization","status":"failed","title":"should apply authorization"},{"ancestorTitles":["Consultation Routes","GET /api/consultations/:consultationId"],"duration":0,"failureMessages":["TypeError: argument handler must be a function\n    at Route.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/lib/route.js:228:15)\n    at router.Router.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/index.js:448:19)\n    at Object.get (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js:97:8)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/routes/consultation-routes.test.js:152:32)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"Consultation Routes GET /api/consultations/:consultationId should retrieve consultation by ID","status":"failed","title":"should retrieve consultation by ID"},{"ancestorTitles":["Consultation Routes","PUT /api/consultations/:consultationId/cancel"],"duration":0,"failureMessages":["TypeError: argument handler must be a function\n    at Route.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/lib/route.js:228:15)\n    at router.Router.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/index.js:448:19)\n    at Object.get (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js:97:8)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/routes/consultation-routes.test.js:152:32)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"Consultation Routes PUT /api/consultations/:consultationId/cancel should cancel a consultation","status":"failed","title":"should cancel a consultation"},{"ancestorTitles":["Consultation Routes","PUT /api/consultations/:consultationId/complete"],"duration":1,"failureMessages":["TypeError: argument handler must be a function\n    at Route.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/lib/route.js:228:15)\n    at router.Router.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/index.js:448:19)\n    at Object.get (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js:97:8)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/routes/consultation-routes.test.js:152:32)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"Consultation Routes PUT /api/consultations/:consultationId/complete should complete a consultation with consultant role","status":"failed","title":"should complete a consultation with consultant role"},{"ancestorTitles":["Consultation Routes","PUT /api/consultations/:consultationId/reschedule"],"duration":0,"failureMessages":["TypeError: argument handler must be a function\n    at Route.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/lib/route.js:228:15)\n    at router.Router.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/index.js:448:19)\n    at Object.get (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js:97:8)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/routes/consultation-routes.test.js:152:32)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"Consultation Routes PUT /api/consultations/:consultationId/reschedule should reschedule a consultation","status":"failed","title":"should reschedule a consultation"},{"ancestorTitles":["Consultation Routes","POST /api/consultations/:consultationId/feedback/client"],"duration":7,"failureMessages":["TypeError: argument handler must be a function\n    at Route.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/lib/route.js:228:15)\n    at router.Router.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/index.js:448:19)\n    at Object.get (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js:97:8)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/routes/consultation-routes.test.js:152:32)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"Consultation Routes POST /api/consultations/:consultationId/feedback/client should submit client feedback","status":"failed","title":"should submit client feedback"},{"ancestorTitles":["Consultation Routes","POST /api/consultations/:consultationId/notes"],"duration":1,"failureMessages":["TypeError: argument handler must be a function\n    at Route.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/lib/route.js:228:15)\n    at router.Router.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/index.js:448:19)\n    at Object.get (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js:97:8)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/routes/consultation-routes.test.js:152:32)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"Consultation Routes POST /api/consultations/:consultationId/notes should add note to consultation","status":"failed","title":"should add note to consultation"},{"ancestorTitles":["Consultation Routes","Authorization checks"],"duration":0,"failureMessages":["TypeError: argument handler must be a function\n    at Route.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/lib/route.js:228:15)\n    at router.Router.<computed> [as get] (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/node_modules/router/index.js:448:19)\n    at Object.get (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/routes/consultation-routes.js:97:8)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/routes/consultation-routes.test.js:152:32)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"Consultation Routes Authorization checks should deny access when user role is not authorized","status":"failed","title":"should deny access when user role is not authorized"}]},{"numFailingTests":16,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1767388727814,"loadTestEnvironmentEnd":1767388727588,"loadTestEnvironmentStart":1767388727586,"runtime":226,"setupAfterEnvEnd":1767388727595,"setupAfterEnvStart":1767388727595,"setupFilesEnd":1767388727588,"setupFilesStart":1767388727588,"slow":false,"start":1767388727588},"testFilePath":"/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/consultation-service.test.js","failureMessage":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationService › createConsultation › should successfully create a consultation when all data is valid\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/consultation-service.test.js\u001b[39m\u001b[0m\u001b[2m:55:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationService › createConsultation › should throw error when consultant is not found\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/consultation-service.test.js\u001b[39m\u001b[0m\u001b[2m:55:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationService › createConsultation › should throw error when client is not found\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/consultation-service.test.js\u001b[39m\u001b[0m\u001b[2m:55:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationService › createConsultation › should throw error when consultant is not active\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/consultation-service.test.js\u001b[39m\u001b[0m\u001b[2m:55:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationService › createConsultation › should throw error when required fields are missing\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/consultation-service.test.js\u001b[39m\u001b[0m\u001b[2m:55:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationService › createConsultation › should detect and throw error on scheduling conflicts\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/consultation-service.test.js\u001b[39m\u001b[0m\u001b[2m:55:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationService › getConsultationById › should successfully retrieve a consultation by ID\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/consultation-service.test.js\u001b[39m\u001b[0m\u001b[2m:55:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationService › getConsultationById › should throw error when consultation is not found\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/consultation-service.test.js\u001b[39m\u001b[0m\u001b[2m:55:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationService › updateConsultationStatus › should successfully update consultation status\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/consultation-service.test.js\u001b[39m\u001b[0m\u001b[2m:55:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationService › updateConsultationStatus › should throw error for invalid status\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/consultation-service.test.js\u001b[39m\u001b[0m\u001b[2m:55:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationService › cancelConsultation › should successfully cancel a consultation\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/consultation-service.test.js\u001b[39m\u001b[0m\u001b[2m:55:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationService › cancelConsultation › should throw error when consultation is already completed\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/consultation-service.test.js\u001b[39m\u001b[0m\u001b[2m:55:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationService › getConsultationsByConsultant › should retrieve all consultations for a consultant\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/consultation-service.test.js\u001b[39m\u001b[0m\u001b[2m:55:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationService › getConsultationsByConsultant › should filter consultations by status\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/consultation-service.test.js\u001b[39m\u001b[0m\u001b[2m:55:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationService › addConsultationNotes › should successfully add notes to a consultation\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/consultation-service.test.js\u001b[39m\u001b[0m\u001b[2m:55:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationService › completeConsultation › should successfully complete a consultation with outcomes\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/consultation-service.test.js\u001b[39m\u001b[0m\u001b[2m:55:27)\u001b[22m\u001b[2m\u001b[22m\n","testResults":[{"ancestorTitles":["ConsultationService","createConsultation"],"duration":92,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/consultation-service.test.js:55:27)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationService createConsultation should successfully create a consultation when all data is valid","status":"failed","title":"should successfully create a consultation when all data is valid"},{"ancestorTitles":["ConsultationService","createConsultation"],"duration":2,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/consultation-service.test.js:55:27)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationService createConsultation should throw error when consultant is not found","status":"failed","title":"should throw error when consultant is not found"},{"ancestorTitles":["ConsultationService","createConsultation"],"duration":1,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/consultation-service.test.js:55:27)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationService createConsultation should throw error when client is not found","status":"failed","title":"should throw error when client is not found"},{"ancestorTitles":["ConsultationService","createConsultation"],"duration":1,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/consultation-service.test.js:55:27)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationService createConsultation should throw error when consultant is not active","status":"failed","title":"should throw error when consultant is not active"},{"ancestorTitles":["ConsultationService","createConsultation"],"duration":2,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/consultation-service.test.js:55:27)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationService createConsultation should throw error when required fields are missing","status":"failed","title":"should throw error when required fields are missing"},{"ancestorTitles":["ConsultationService","createConsultation"],"duration":2,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/consultation-service.test.js:55:27)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationService createConsultation should detect and throw error on scheduling conflicts","status":"failed","title":"should detect and throw error on scheduling conflicts"},{"ancestorTitles":["ConsultationService","getConsultationById"],"duration":2,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/consultation-service.test.js:55:27)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationService getConsultationById should successfully retrieve a consultation by ID","status":"failed","title":"should successfully retrieve a consultation by ID"},{"ancestorTitles":["ConsultationService","getConsultationById"],"duration":2,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/consultation-service.test.js:55:27)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationService getConsultationById should throw error when consultation is not found","status":"failed","title":"should throw error when consultation is not found"},{"ancestorTitles":["ConsultationService","updateConsultationStatus"],"duration":1,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/consultation-service.test.js:55:27)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationService updateConsultationStatus should successfully update consultation status","status":"failed","title":"should successfully update consultation status"},{"ancestorTitles":["ConsultationService","updateConsultationStatus"],"duration":2,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/consultation-service.test.js:55:27)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationService updateConsultationStatus should throw error for invalid status","status":"failed","title":"should throw error for invalid status"},{"ancestorTitles":["ConsultationService","cancelConsultation"],"duration":2,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/consultation-service.test.js:55:27)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationService cancelConsultation should successfully cancel a consultation","status":"failed","title":"should successfully cancel a consultation"},{"ancestorTitles":["ConsultationService","cancelConsultation"],"duration":1,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/consultation-service.test.js:55:27)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationService cancelConsultation should throw error when consultation is already completed","status":"failed","title":"should throw error when consultation is already completed"},{"ancestorTitles":["ConsultationService","getConsultationsByConsultant"],"duration":2,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/consultation-service.test.js:55:27)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationService getConsultationsByConsultant should retrieve all consultations for a consultant","status":"failed","title":"should retrieve all consultations for a consultant"},{"ancestorTitles":["ConsultationService","getConsultationsByConsultant"],"duration":2,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/consultation-service.test.js:55:27)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationService getConsultationsByConsultant should filter consultations by status","status":"failed","title":"should filter consultations by status"},{"ancestorTitles":["ConsultationService","addConsultationNotes"],"duration":2,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/consultation-service.test.js:55:27)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationService addConsultationNotes should successfully add notes to a consultation","status":"failed","title":"should successfully add notes to a consultation"},{"ancestorTitles":["ConsultationService","completeConsultation"],"duration":2,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/consultation-service.test.js:55:27)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationService completeConsultation should successfully complete a consultation with outcomes","status":"failed","title":"should successfully complete a consultation with outcomes"}]},{"numFailingTests":15,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1767388728007,"loadTestEnvironmentEnd":1767388727858,"loadTestEnvironmentStart":1767388727857,"runtime":149,"setupAfterEnvEnd":1767388727865,"setupAfterEnvStart":1767388727865,"setupFilesEnd":1767388727858,"setupFilesStart":1767388727858,"slow":false,"start":1767388727858},"testFilePath":"/Users/eolaw/Desktop/insightserenity-platform/tests/unit/controllers/consultation-controller.test.js","failureMessage":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationController › createConsultation › should successfully create a consultation and return 201\u001b[39m\u001b[22m\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1171 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.interpretAsType (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.path (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Schema.add (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new Schema (\u001b[22m\u001b[2mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.require (\u001b[22m\u001b[2mservers/customer-services/modules/core-business/consultation-management/services/consultation-service.js\u001b[2m:22:33)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/controllers/consultation-controller.test.js\u001b[39m\u001b[0m\u001b[2m:25:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationController › createConsultation › should return 400 when required fields are missing\u001b[39m\u001b[22m\n\n    TypeError: ConsultationController is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 37 |\u001b[39m     \u001b[90m// Import controller after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m     \u001b[33mConsultationController\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/consultation-management/controllers/consultation-controller'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 39 |\u001b[39m     consultationController \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mConsultationController\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m     \u001b[90m// Create mock request, response, and next\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m     req \u001b[33m=\u001b[39m createMockRequest()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/controllers/consultation-controller.test.js\u001b[39m\u001b[0m\u001b[2m:39:30)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationController › createConsultation › should call next with error when service throws\u001b[39m\u001b[22m\n\n    TypeError: ConsultationController is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 37 |\u001b[39m     \u001b[90m// Import controller after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m     \u001b[33mConsultationController\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/consultation-management/controllers/consultation-controller'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 39 |\u001b[39m     consultationController \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mConsultationController\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m     \u001b[90m// Create mock request, response, and next\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m     req \u001b[33m=\u001b[39m createMockRequest()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/controllers/consultation-controller.test.js\u001b[39m\u001b[0m\u001b[2m:39:30)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationController › getConsultationById › should successfully retrieve a consultation by ID\u001b[39m\u001b[22m\n\n    TypeError: ConsultationController is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 37 |\u001b[39m     \u001b[90m// Import controller after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m     \u001b[33mConsultationController\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/consultation-management/controllers/consultation-controller'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 39 |\u001b[39m     consultationController \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mConsultationController\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m     \u001b[90m// Create mock request, response, and next\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m     req \u001b[33m=\u001b[39m createMockRequest()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/controllers/consultation-controller.test.js\u001b[39m\u001b[0m\u001b[2m:39:30)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationController › getConsultationById › should return 404 when consultation is not found\u001b[39m\u001b[22m\n\n    TypeError: ConsultationController is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 37 |\u001b[39m     \u001b[90m// Import controller after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m     \u001b[33mConsultationController\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/consultation-management/controllers/consultation-controller'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 39 |\u001b[39m     consultationController \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mConsultationController\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m     \u001b[90m// Create mock request, response, and next\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m     req \u001b[33m=\u001b[39m createMockRequest()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/controllers/consultation-controller.test.js\u001b[39m\u001b[0m\u001b[2m:39:30)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationController › getConsultationsByConsultant › should retrieve all consultations for a consultant\u001b[39m\u001b[22m\n\n    TypeError: ConsultationController is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 37 |\u001b[39m     \u001b[90m// Import controller after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m     \u001b[33mConsultationController\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/consultation-management/controllers/consultation-controller'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 39 |\u001b[39m     consultationController \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mConsultationController\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m     \u001b[90m// Create mock request, response, and next\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m     req \u001b[33m=\u001b[39m createMockRequest()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/controllers/consultation-controller.test.js\u001b[39m\u001b[0m\u001b[2m:39:30)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationController › getConsultationsByConsultant › should return empty array when no consultations found\u001b[39m\u001b[22m\n\n    TypeError: ConsultationController is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 37 |\u001b[39m     \u001b[90m// Import controller after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m     \u001b[33mConsultationController\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/consultation-management/controllers/consultation-controller'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 39 |\u001b[39m     consultationController \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mConsultationController\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m     \u001b[90m// Create mock request, response, and next\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m     req \u001b[33m=\u001b[39m createMockRequest()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/controllers/consultation-controller.test.js\u001b[39m\u001b[0m\u001b[2m:39:30)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationController › cancelConsultation › should successfully cancel a consultation\u001b[39m\u001b[22m\n\n    TypeError: ConsultationController is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 37 |\u001b[39m     \u001b[90m// Import controller after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m     \u001b[33mConsultationController\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/consultation-management/controllers/consultation-controller'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 39 |\u001b[39m     consultationController \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mConsultationController\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m     \u001b[90m// Create mock request, response, and next\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m     req \u001b[33m=\u001b[39m createMockRequest()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/controllers/consultation-controller.test.js\u001b[39m\u001b[0m\u001b[2m:39:30)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationController › cancelConsultation › should return error when cancelling already completed consultation\u001b[39m\u001b[22m\n\n    TypeError: ConsultationController is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 37 |\u001b[39m     \u001b[90m// Import controller after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m     \u001b[33mConsultationController\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/consultation-management/controllers/consultation-controller'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 39 |\u001b[39m     consultationController \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mConsultationController\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m     \u001b[90m// Create mock request, response, and next\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m     req \u001b[33m=\u001b[39m createMockRequest()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/controllers/consultation-controller.test.js\u001b[39m\u001b[0m\u001b[2m:39:30)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationController › completeConsultation › should successfully complete a consultation with outcomes\u001b[39m\u001b[22m\n\n    TypeError: ConsultationController is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 37 |\u001b[39m     \u001b[90m// Import controller after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m     \u001b[33mConsultationController\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/consultation-management/controllers/consultation-controller'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 39 |\u001b[39m     consultationController \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mConsultationController\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m     \u001b[90m// Create mock request, response, and next\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m     req \u001b[33m=\u001b[39m createMockRequest()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/controllers/consultation-controller.test.js\u001b[39m\u001b[0m\u001b[2m:39:30)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationController › submitClientFeedback › should successfully submit client feedback\u001b[39m\u001b[22m\n\n    TypeError: ConsultationController is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 37 |\u001b[39m     \u001b[90m// Import controller after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m     \u001b[33mConsultationController\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/consultation-management/controllers/consultation-controller'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 39 |\u001b[39m     consultationController \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mConsultationController\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m     \u001b[90m// Create mock request, response, and next\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m     req \u001b[33m=\u001b[39m createMockRequest()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/controllers/consultation-controller.test.js\u001b[39m\u001b[0m\u001b[2m:39:30)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationController › submitClientFeedback › should return error when rating is out of range\u001b[39m\u001b[22m\n\n    TypeError: ConsultationController is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 37 |\u001b[39m     \u001b[90m// Import controller after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m     \u001b[33mConsultationController\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/consultation-management/controllers/consultation-controller'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 39 |\u001b[39m     consultationController \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mConsultationController\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m     \u001b[90m// Create mock request, response, and next\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m     req \u001b[33m=\u001b[39m createMockRequest()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/controllers/consultation-controller.test.js\u001b[39m\u001b[0m\u001b[2m:39:30)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationController › addNote › should successfully add a note to consultation\u001b[39m\u001b[22m\n\n    TypeError: ConsultationController is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 37 |\u001b[39m     \u001b[90m// Import controller after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m     \u001b[33mConsultationController\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/consultation-management/controllers/consultation-controller'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 39 |\u001b[39m     consultationController \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mConsultationController\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m     \u001b[90m// Create mock request, response, and next\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m     req \u001b[33m=\u001b[39m createMockRequest()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/controllers/consultation-controller.test.js\u001b[39m\u001b[0m\u001b[2m:39:30)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationController › getUpcomingConsultations › should retrieve upcoming consultations for authenticated user\u001b[39m\u001b[22m\n\n    TypeError: ConsultationController is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 37 |\u001b[39m     \u001b[90m// Import controller after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m     \u001b[33mConsultationController\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/consultation-management/controllers/consultation-controller'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 39 |\u001b[39m     consultationController \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mConsultationController\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m     \u001b[90m// Create mock request, response, and next\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m     req \u001b[33m=\u001b[39m createMockRequest()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/controllers/consultation-controller.test.js\u001b[39m\u001b[0m\u001b[2m:39:30)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mConsultationController › rescheduleConsultation › should successfully reschedule a consultation\u001b[39m\u001b[22m\n\n    TypeError: ConsultationController is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 37 |\u001b[39m     \u001b[90m// Import controller after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m     \u001b[33mConsultationController\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/consultation-management/controllers/consultation-controller'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 39 |\u001b[39m     consultationController \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mConsultationController\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m     \u001b[90m// Create mock request, response, and next\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m     req \u001b[33m=\u001b[39m createMockRequest()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/controllers/consultation-controller.test.js\u001b[39m\u001b[0m\u001b[2m:39:30)\u001b[22m\u001b[2m\u001b[22m\n","testResults":[{"ancestorTitles":["ConsultationController","createConsultation"],"duration":62,"failureMessages":["TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1732:11)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:844:14)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Schema.interpretAsType (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1661:29)\n    at Schema.path (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:1286:27)\n    at Schema.add (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:792:12)\n    at new Schema (/Users/eolaw/Desktop/insightserenity-platform/node_modules/mongoose/lib/schema.js:145:10)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/shared/lib/database/models/customer-services/core-business/client-management/client-model.js:1172:22)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/billing/services/credit-management-service.js:4:16)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:964:21)\n    at Object.require (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/consultation-management/services/consultation-service.js:22:33)\n    at Runtime._execModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1268:24)\n    at Runtime._loadModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:944:12)\n    at Runtime.requireModule (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:832:12)\n    at Runtime._generateMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:1463:34)\n    at Runtime.requireMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:930:39)\n    at Runtime.requireModuleOrMock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runtime/build/index.js:962:21)\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/controllers/consultation-controller.test.js:25:31)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationController createConsultation should successfully create a consultation and return 201","status":"failed","title":"should successfully create a consultation and return 201"},{"ancestorTitles":["ConsultationController","createConsultation"],"duration":6,"failureMessages":["TypeError: ConsultationController is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/controllers/consultation-controller.test.js:39:30)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationController createConsultation should return 400 when required fields are missing","status":"failed","title":"should return 400 when required fields are missing"},{"ancestorTitles":["ConsultationController","createConsultation"],"duration":0,"failureMessages":["TypeError: ConsultationController is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/controllers/consultation-controller.test.js:39:30)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationController createConsultation should call next with error when service throws","status":"failed","title":"should call next with error when service throws"},{"ancestorTitles":["ConsultationController","getConsultationById"],"duration":0,"failureMessages":["TypeError: ConsultationController is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/controllers/consultation-controller.test.js:39:30)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationController getConsultationById should successfully retrieve a consultation by ID","status":"failed","title":"should successfully retrieve a consultation by ID"},{"ancestorTitles":["ConsultationController","getConsultationById"],"duration":1,"failureMessages":["TypeError: ConsultationController is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/controllers/consultation-controller.test.js:39:30)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationController getConsultationById should return 404 when consultation is not found","status":"failed","title":"should return 404 when consultation is not found"},{"ancestorTitles":["ConsultationController","getConsultationsByConsultant"],"duration":0,"failureMessages":["TypeError: ConsultationController is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/controllers/consultation-controller.test.js:39:30)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationController getConsultationsByConsultant should retrieve all consultations for a consultant","status":"failed","title":"should retrieve all consultations for a consultant"},{"ancestorTitles":["ConsultationController","getConsultationsByConsultant"],"duration":0,"failureMessages":["TypeError: ConsultationController is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/controllers/consultation-controller.test.js:39:30)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationController getConsultationsByConsultant should return empty array when no consultations found","status":"failed","title":"should return empty array when no consultations found"},{"ancestorTitles":["ConsultationController","cancelConsultation"],"duration":0,"failureMessages":["TypeError: ConsultationController is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/controllers/consultation-controller.test.js:39:30)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationController cancelConsultation should successfully cancel a consultation","status":"failed","title":"should successfully cancel a consultation"},{"ancestorTitles":["ConsultationController","cancelConsultation"],"duration":0,"failureMessages":["TypeError: ConsultationController is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/controllers/consultation-controller.test.js:39:30)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationController cancelConsultation should return error when cancelling already completed consultation","status":"failed","title":"should return error when cancelling already completed consultation"},{"ancestorTitles":["ConsultationController","completeConsultation"],"duration":0,"failureMessages":["TypeError: ConsultationController is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/controllers/consultation-controller.test.js:39:30)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationController completeConsultation should successfully complete a consultation with outcomes","status":"failed","title":"should successfully complete a consultation with outcomes"},{"ancestorTitles":["ConsultationController","submitClientFeedback"],"duration":1,"failureMessages":["TypeError: ConsultationController is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/controllers/consultation-controller.test.js:39:30)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationController submitClientFeedback should successfully submit client feedback","status":"failed","title":"should successfully submit client feedback"},{"ancestorTitles":["ConsultationController","submitClientFeedback"],"duration":0,"failureMessages":["TypeError: ConsultationController is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/controllers/consultation-controller.test.js:39:30)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationController submitClientFeedback should return error when rating is out of range","status":"failed","title":"should return error when rating is out of range"},{"ancestorTitles":["ConsultationController","addNote"],"duration":0,"failureMessages":["TypeError: ConsultationController is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/controllers/consultation-controller.test.js:39:30)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationController addNote should successfully add a note to consultation","status":"failed","title":"should successfully add a note to consultation"},{"ancestorTitles":["ConsultationController","getUpcomingConsultations"],"duration":0,"failureMessages":["TypeError: ConsultationController is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/controllers/consultation-controller.test.js:39:30)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationController getUpcomingConsultations should retrieve upcoming consultations for authenticated user","status":"failed","title":"should retrieve upcoming consultations for authenticated user"},{"ancestorTitles":["ConsultationController","rescheduleConsultation"],"duration":0,"failureMessages":["TypeError: ConsultationController is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/controllers/consultation-controller.test.js:39:30)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"ConsultationController rescheduleConsultation should successfully reschedule a consultation","status":"failed","title":"should successfully reschedule a consultation"}]},{"numFailingTests":23,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1767388728145,"loadTestEnvironmentEnd":1767388728052,"loadTestEnvironmentStart":1767388728050,"runtime":93,"setupAfterEnvEnd":1767388728059,"setupAfterEnvStart":1767388728059,"setupFilesEnd":1767388728052,"setupFilesStart":1767388728052,"slow":false,"start":1767388728052},"testFilePath":"/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js","failureMessage":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › createUser › should successfully create a user with valid data\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › createUser › should throw error when user already exists\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › createUser › should throw error when email is invalid\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › createUser › should throw error when password is too weak\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › createUser › should convert email to lowercase\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › getUserById › should successfully retrieve a user by ID\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › getUserById › should throw error when user is not found\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › getUserById › should exclude sensitive fields by default\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › getUserByEmail › should successfully retrieve a user by email\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › getUserByEmail › should convert email to lowercase before search\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › updateUser › should successfully update a user\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › updateUser › should hash password when updating password\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › updateUser › should not allow updating protected fields\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › deleteUser › should successfully soft delete a user\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › deleteUser › should successfully hard delete a user\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › listUsers › should successfully list users with pagination\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › listUsers › should filter users by role\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › listUsers › should filter users by status\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › verifyPassword › should return true for correct password\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › verifyPassword › should return false for incorrect password\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › updateUserRole › should successfully update user role\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › updateUserRole › should throw error for invalid role\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUserService › updateUserStatus › should successfully update user status\u001b[39m\u001b[22m\n\n    TypeError: UserService is not a constructor\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     \u001b[90m// Import the service after mocking\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     \u001b[33mUserService\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../../../servers/customer-services/modules/core-business/user-management/services/user-service'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     userService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mUserService\u001b[39m()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/services/user-service.test.js\u001b[39m\u001b[0m\u001b[2m:70:19)\u001b[22m\u001b[2m\u001b[22m\n","testResults":[{"ancestorTitles":["UserService","createUser"],"duration":35,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService createUser should successfully create a user with valid data","status":"failed","title":"should successfully create a user with valid data"},{"ancestorTitles":["UserService","createUser"],"duration":0,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService createUser should throw error when user already exists","status":"failed","title":"should throw error when user already exists"},{"ancestorTitles":["UserService","createUser"],"duration":1,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService createUser should throw error when email is invalid","status":"failed","title":"should throw error when email is invalid"},{"ancestorTitles":["UserService","createUser"],"duration":0,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService createUser should throw error when password is too weak","status":"failed","title":"should throw error when password is too weak"},{"ancestorTitles":["UserService","createUser"],"duration":0,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService createUser should convert email to lowercase","status":"failed","title":"should convert email to lowercase"},{"ancestorTitles":["UserService","getUserById"],"duration":0,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService getUserById should successfully retrieve a user by ID","status":"failed","title":"should successfully retrieve a user by ID"},{"ancestorTitles":["UserService","getUserById"],"duration":0,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService getUserById should throw error when user is not found","status":"failed","title":"should throw error when user is not found"},{"ancestorTitles":["UserService","getUserById"],"duration":0,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService getUserById should exclude sensitive fields by default","status":"failed","title":"should exclude sensitive fields by default"},{"ancestorTitles":["UserService","getUserByEmail"],"duration":0,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService getUserByEmail should successfully retrieve a user by email","status":"failed","title":"should successfully retrieve a user by email"},{"ancestorTitles":["UserService","getUserByEmail"],"duration":1,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService getUserByEmail should convert email to lowercase before search","status":"failed","title":"should convert email to lowercase before search"},{"ancestorTitles":["UserService","updateUser"],"duration":0,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService updateUser should successfully update a user","status":"failed","title":"should successfully update a user"},{"ancestorTitles":["UserService","updateUser"],"duration":0,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService updateUser should hash password when updating password","status":"failed","title":"should hash password when updating password"},{"ancestorTitles":["UserService","updateUser"],"duration":1,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService updateUser should not allow updating protected fields","status":"failed","title":"should not allow updating protected fields"},{"ancestorTitles":["UserService","deleteUser"],"duration":0,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService deleteUser should successfully soft delete a user","status":"failed","title":"should successfully soft delete a user"},{"ancestorTitles":["UserService","deleteUser"],"duration":0,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService deleteUser should successfully hard delete a user","status":"failed","title":"should successfully hard delete a user"},{"ancestorTitles":["UserService","listUsers"],"duration":0,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService listUsers should successfully list users with pagination","status":"failed","title":"should successfully list users with pagination"},{"ancestorTitles":["UserService","listUsers"],"duration":1,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService listUsers should filter users by role","status":"failed","title":"should filter users by role"},{"ancestorTitles":["UserService","listUsers"],"duration":0,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService listUsers should filter users by status","status":"failed","title":"should filter users by status"},{"ancestorTitles":["UserService","verifyPassword"],"duration":0,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService verifyPassword should return true for correct password","status":"failed","title":"should return true for correct password"},{"ancestorTitles":["UserService","verifyPassword"],"duration":1,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService verifyPassword should return false for incorrect password","status":"failed","title":"should return false for incorrect password"},{"ancestorTitles":["UserService","updateUserRole"],"duration":0,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService updateUserRole should successfully update user role","status":"failed","title":"should successfully update user role"},{"ancestorTitles":["UserService","updateUserRole"],"duration":0,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService updateUserRole should throw error for invalid role","status":"failed","title":"should throw error for invalid role"},{"ancestorTitles":["UserService","updateUserStatus"],"duration":0,"failureMessages":["TypeError: UserService is not a constructor\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/tests/unit/services/user-service.test.js:70:19)\n    at Promise.finally.completed (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n    at _callCircusHook (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:976:40)\n    at _runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:941:5)\n    at /Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n    at run (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n    at jestAdapter (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:275:16)\n    at runTest (/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-runner/build/index.js:343:7)"],"fullName":"UserService updateUserStatus should successfully update user status","status":"failed","title":"should successfully update user status"}]},{"numFailingTests":2,"numPassingTests":43,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1767388728201,"loadTestEnvironmentEnd":1767388728167,"loadTestEnvironmentStart":1767388728166,"runtime":34,"setupAfterEnvEnd":1767388728174,"setupAfterEnvStart":1767388728174,"setupFilesEnd":1767388728167,"setupFilesStart":1767388728167,"slow":false,"start":1767388728167},"testFilePath":"/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/authentication/__tests__/validators/auth-validators.test.js","failureMessage":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAuthentication Validators Unit Tests › validateRegistration › should send 400 response when validation fails\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\n    Expected number of calls: \u001b[32m0\u001b[39m\n    Received number of calls: \u001b[31m9\u001b[39m\n\n    1: called with 0 arguments\n    2: called with 0 arguments\n    3: called with 0 arguments\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 374 |\u001b[39m         })\u001b[22m\n\u001b[2m     \u001b[90m 375 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 376 |\u001b[39m       expect(mockNext)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 377 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 378 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 379 |\u001b[39m     test(\u001b[32m'should call next when validation passes'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mservers/customer-services/modules/core-business/authentication/__tests__/validators/auth-validators.test.js\u001b[39m\u001b[0m\u001b[2m:376:28)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAuthentication Validators Unit Tests › validatePassword › should accept strong passwords\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m0\u001b[39m\n    Received: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 563 |\u001b[39m         \u001b[36mconst\u001b[39m errors \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m runValidators(validateRegistration\u001b[33m,\u001b[39m req)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 564 |\u001b[39m         \u001b[36mconst\u001b[39m passwordErrors \u001b[33m=\u001b[39m errors\u001b[33m.\u001b[39marray()\u001b[33m.\u001b[39mfilter(err \u001b[33m=>\u001b[39m err\u001b[33m.\u001b[39mpath \u001b[33m===\u001b[39m \u001b[32m'password'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 565 |\u001b[39m         expect(passwordErrors\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBe(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 566 |\u001b[39m       }\u001b[22m\n\u001b[2m     \u001b[90m 567 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 568 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mservers/customer-services/modules/core-business/authentication/__tests__/validators/auth-validators.test.js\u001b[39m\u001b[0m\u001b[2m:565:39)\u001b[22m\u001b[2m\u001b[22m\n","testResults":[{"ancestorTitles":["Authentication Validators Unit Tests","validateRegistration"],"duration":3,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateRegistration should accept valid registration data with all required fields","status":"passed","title":"should accept valid registration data with all required fields"},{"ancestorTitles":["Authentication Validators Unit Tests","validateRegistration"],"duration":1,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateRegistration should reject invalid email formats","status":"passed","title":"should reject invalid email formats"},{"ancestorTitles":["Authentication Validators Unit Tests","validateRegistration"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateRegistration should reject passwords that are too short","status":"passed","title":"should reject passwords that are too short"},{"ancestorTitles":["Authentication Validators Unit Tests","validateRegistration"],"duration":1,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateRegistration should reject passwords without uppercase letters","status":"passed","title":"should reject passwords without uppercase letters"},{"ancestorTitles":["Authentication Validators Unit Tests","validateRegistration"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateRegistration should reject passwords without lowercase letters","status":"passed","title":"should reject passwords without lowercase letters"},{"ancestorTitles":["Authentication Validators Unit Tests","validateRegistration"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateRegistration should reject passwords without numbers","status":"passed","title":"should reject passwords without numbers"},{"ancestorTitles":["Authentication Validators Unit Tests","validateRegistration"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateRegistration should reject passwords without special characters","status":"passed","title":"should reject passwords without special characters"},{"ancestorTitles":["Authentication Validators Unit Tests","validateRegistration"],"duration":1,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateRegistration should accept passwords meeting all requirements","status":"passed","title":"should accept passwords meeting all requirements"},{"ancestorTitles":["Authentication Validators Unit Tests","validateRegistration"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateRegistration should normalize email to lowercase","status":"passed","title":"should normalize email to lowercase"},{"ancestorTitles":["Authentication Validators Unit Tests","validateRegistration"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateRegistration should trim whitespace from names","status":"passed","title":"should trim whitespace from names"},{"ancestorTitles":["Authentication Validators Unit Tests","validateRegistration"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateRegistration should allow optional fields to be omitted","status":"passed","title":"should allow optional fields to be omitted"},{"ancestorTitles":["Authentication Validators Unit Tests","validateRegistration"],"duration":1,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateRegistration should validate phone number format when provided","status":"passed","title":"should validate phone number format when provided"},{"ancestorTitles":["Authentication Validators Unit Tests","validateRegistration"],"duration":1,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateRegistration should accept valid phone number formats","status":"passed","title":"should accept valid phone number formats"},{"ancestorTitles":["Authentication Validators Unit Tests","validateRegistration"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateRegistration should require terms acceptance","status":"passed","title":"should require terms acceptance"},{"ancestorTitles":["Authentication Validators Unit Tests","validateRegistration"],"duration":1,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: \u001b[32m0\u001b[39m\nReceived number of calls: \u001b[31m9\u001b[39m\n\n1: called with 0 arguments\n2: called with 0 arguments\n3: called with 0 arguments\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/authentication/__tests__/validators/auth-validators.test.js:376:28)"],"fullName":"Authentication Validators Unit Tests validateRegistration should send 400 response when validation fails","status":"failed","title":"should send 400 response when validation fails"},{"ancestorTitles":["Authentication Validators Unit Tests","validateRegistration"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateRegistration should call next when validation passes","status":"passed","title":"should call next when validation passes"},{"ancestorTitles":["Authentication Validators Unit Tests","validateLogin"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateLogin should accept valid login credentials","status":"passed","title":"should accept valid login credentials"},{"ancestorTitles":["Authentication Validators Unit Tests","validateLogin"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateLogin should require email field","status":"passed","title":"should require email field"},{"ancestorTitles":["Authentication Validators Unit Tests","validateLogin"],"duration":1,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateLogin should require password field","status":"passed","title":"should require password field"},{"ancestorTitles":["Authentication Validators Unit Tests","validateLogin"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateLogin should reject empty email","status":"passed","title":"should reject empty email"},{"ancestorTitles":["Authentication Validators Unit Tests","validateLogin"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateLogin should reject empty password","status":"passed","title":"should reject empty password"},{"ancestorTitles":["Authentication Validators Unit Tests","validateLogin"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateLogin should normalize email for login","status":"passed","title":"should normalize email for login"},{"ancestorTitles":["Authentication Validators Unit Tests","validateLogin"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateLogin should accept optional rememberMe field","status":"passed","title":"should accept optional rememberMe field"},{"ancestorTitles":["Authentication Validators Unit Tests","validateLogin"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateLogin should accept optional deviceInfo field","status":"passed","title":"should accept optional deviceInfo field"},{"ancestorTitles":["Authentication Validators Unit Tests","validateEmail"],"duration":1,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateEmail should accept valid email addresses","status":"passed","title":"should accept valid email addresses"},{"ancestorTitles":["Authentication Validators Unit Tests","validateEmail"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateEmail should reject invalid email addresses","status":"passed","title":"should reject invalid email addresses"},{"ancestorTitles":["Authentication Validators Unit Tests","validatePassword"],"duration":1,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m0\u001b[39m\nReceived: \u001b[31m1\u001b[39m\n    at Object.<anonymous> (/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/authentication/__tests__/validators/auth-validators.test.js:565:39)"],"fullName":"Authentication Validators Unit Tests validatePassword should accept strong passwords","status":"failed","title":"should accept strong passwords"},{"ancestorTitles":["Authentication Validators Unit Tests","validatePassword"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validatePassword should reject weak passwords","status":"passed","title":"should reject weak passwords"},{"ancestorTitles":["Authentication Validators Unit Tests","validatePassword"],"duration":1,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validatePassword should enforce minimum length requirement","status":"passed","title":"should enforce minimum length requirement"},{"ancestorTitles":["Authentication Validators Unit Tests","validatePassword"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validatePassword should enforce maximum length requirement","status":"passed","title":"should enforce maximum length requirement"},{"ancestorTitles":["Authentication Validators Unit Tests","validatePasswordReset"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validatePasswordReset should accept valid password reset data","status":"passed","title":"should accept valid password reset data"},{"ancestorTitles":["Authentication Validators Unit Tests","validatePasswordReset"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validatePasswordReset should require reset token","status":"passed","title":"should require reset token"},{"ancestorTitles":["Authentication Validators Unit Tests","validatePasswordReset"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validatePasswordReset should require new password","status":"passed","title":"should require new password"},{"ancestorTitles":["Authentication Validators Unit Tests","validatePasswordReset"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validatePasswordReset should require password confirmation","status":"passed","title":"should require password confirmation"},{"ancestorTitles":["Authentication Validators Unit Tests","validatePasswordReset"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validatePasswordReset should reject mismatched password confirmation","status":"passed","title":"should reject mismatched password confirmation"},{"ancestorTitles":["Authentication Validators Unit Tests","validatePasswordReset"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validatePasswordReset should validate new password strength","status":"passed","title":"should validate new password strength"},{"ancestorTitles":["Authentication Validators Unit Tests","validateTokenRefresh"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateTokenRefresh should accept valid refresh token","status":"passed","title":"should accept valid refresh token"},{"ancestorTitles":["Authentication Validators Unit Tests","validateTokenRefresh"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateTokenRefresh should require refresh token","status":"passed","title":"should require refresh token"},{"ancestorTitles":["Authentication Validators Unit Tests","validateTokenRefresh"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateTokenRefresh should reject empty refresh token","status":"passed","title":"should reject empty refresh token"},{"ancestorTitles":["Authentication Validators Unit Tests","validateTokenRefresh"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateTokenRefresh should trim whitespace from refresh token","status":"passed","title":"should trim whitespace from refresh token"},{"ancestorTitles":["Authentication Validators Unit Tests","validateTokenRefresh"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests validateTokenRefresh should reject tokens shorter than minimum length","status":"passed","title":"should reject tokens shorter than minimum length"},{"ancestorTitles":["Authentication Validators Unit Tests","Edge Cases and Security"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests Edge Cases and Security should handle SQL injection attempts in email","status":"passed","title":"should handle SQL injection attempts in email"},{"ancestorTitles":["Authentication Validators Unit Tests","Edge Cases and Security"],"duration":1,"failureMessages":[],"fullName":"Authentication Validators Unit Tests Edge Cases and Security should handle XSS attempts in input fields","status":"passed","title":"should handle XSS attempts in input fields"},{"ancestorTitles":["Authentication Validators Unit Tests","Edge Cases and Security"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests Edge Cases and Security should handle extremely long input strings","status":"passed","title":"should handle extremely long input strings"},{"ancestorTitles":["Authentication Validators Unit Tests","Edge Cases and Security"],"duration":0,"failureMessages":[],"fullName":"Authentication Validators Unit Tests Edge Cases and Security should handle unicode characters appropriately","status":"passed","title":"should handle unicode characters appropriately"}]},{"numFailingTests":0,"numPassingTests":12,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1767388728226,"loadTestEnvironmentEnd":1767388728203,"loadTestEnvironmentStart":1767388728202,"runtime":23,"setupAfterEnvEnd":1767388728210,"setupAfterEnvStart":1767388728210,"setupFilesEnd":1767388728203,"setupFilesStart":1767388728203,"slow":false,"start":1767388728203},"testFilePath":"/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/authentication/__tests__/services/direct-auth-service.test.js","failureMessage":null,"testResults":[{"ancestorTitles":["DirectAuthService Unit Tests","registerDirectUser"],"duration":1,"failureMessages":[],"fullName":"DirectAuthService Unit Tests registerDirectUser should successfully register a new user with hashed password","status":"passed","title":"should successfully register a new user with hashed password"},{"ancestorTitles":["DirectAuthService Unit Tests","registerDirectUser"],"duration":0,"failureMessages":[],"fullName":"DirectAuthService Unit Tests registerDirectUser should throw error when user already exists","status":"passed","title":"should throw error when user already exists"},{"ancestorTitles":["DirectAuthService Unit Tests","registerDirectUser"],"duration":0,"failureMessages":[],"fullName":"DirectAuthService Unit Tests registerDirectUser should hash password with correct salt rounds","status":"passed","title":"should hash password with correct salt rounds"},{"ancestorTitles":["DirectAuthService Unit Tests","registerDirectUser"],"duration":0,"failureMessages":[],"fullName":"DirectAuthService Unit Tests registerDirectUser should generate verification token for email verification","status":"passed","title":"should generate verification token for email verification"},{"ancestorTitles":["DirectAuthService Unit Tests","loginDirectUser - Authentication Patterns"],"duration":0,"failureMessages":[],"fullName":"DirectAuthService Unit Tests loginDirectUser - Authentication Patterns should successfully authenticate user with valid credentials","status":"passed","title":"should successfully authenticate user with valid credentials"},{"ancestorTitles":["DirectAuthService Unit Tests","loginDirectUser - Authentication Patterns"],"duration":0,"failureMessages":[],"fullName":"DirectAuthService Unit Tests loginDirectUser - Authentication Patterns should handle MFA requirement correctly","status":"passed","title":"should handle MFA requirement correctly"},{"ancestorTitles":["DirectAuthService Unit Tests","loginDirectUser - Authentication Patterns"],"duration":0,"failureMessages":[],"fullName":"DirectAuthService Unit Tests loginDirectUser - Authentication Patterns should reject invalid credentials","status":"passed","title":"should reject invalid credentials"},{"ancestorTitles":["DirectAuthService Unit Tests","Token and Password Management Patterns"],"duration":0,"failureMessages":[],"fullName":"DirectAuthService Unit Tests Token and Password Management Patterns should generate access token with correct payload","status":"passed","title":"should generate access token with correct payload"},{"ancestorTitles":["DirectAuthService Unit Tests","Token and Password Management Patterns"],"duration":0,"failureMessages":[],"fullName":"DirectAuthService Unit Tests Token and Password Management Patterns should hash passwords with bcrypt","status":"passed","title":"should hash passwords with bcrypt"},{"ancestorTitles":["DirectAuthService Unit Tests","Token and Password Management Patterns"],"duration":0,"failureMessages":[],"fullName":"DirectAuthService Unit Tests Token and Password Management Patterns should verify passwords correctly","status":"passed","title":"should verify passwords correctly"},{"ancestorTitles":["DirectAuthService Unit Tests","Token and Password Management Patterns"],"duration":0,"failureMessages":[],"fullName":"DirectAuthService Unit Tests Token and Password Management Patterns should blacklist tokens on logout","status":"passed","title":"should blacklist tokens on logout"},{"ancestorTitles":["DirectAuthService Unit Tests","Token and Password Management Patterns"],"duration":0,"failureMessages":[],"fullName":"DirectAuthService Unit Tests Token and Password Management Patterns should handle session creation","status":"passed","title":"should handle session creation"}]},{"numFailingTests":0,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":0,"loadTestEnvironmentEnd":0,"loadTestEnvironmentStart":0,"runtime":0,"setupAfterEnvEnd":0,"setupAfterEnvStart":0,"setupFilesEnd":0,"setupFilesStart":0,"slow":false,"start":0},"testFilePath":"/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/authentication/__tests__/routes/auth-routes.test.js","failureMessage":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\n    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 1171 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\n     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\n     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\n\n      \u001b[2mat Schema.interpretAsType (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\n      \u001b[2mat Schema.path (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\n      \u001b[2mat Schema.add (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\n      \u001b[2mat new Schema (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\n      \u001b[2mat Schema.interpretAsType (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\n      \u001b[2mat Schema.path (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\n      \u001b[2mat Schema.add (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\n      \u001b[2mat new Schema (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\n      \u001b[2mat Object.require (\u001b[22mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\n      \u001b[2mat Object.require (\u001b[22mservers/customer-services/modules/core-business/authentication/services/direct-auth-service.js\u001b[2m:30:33)\u001b[22m\n      \u001b[2mat Object.require (\u001b[22mservers/customer-services/modules/core-business/authentication/controllers/auth-controller.js\u001b[2m:6:27)\u001b[22m\n      \u001b[2mat Object.require (\u001b[22mservers/customer-services/modules/core-business/authentication/routes/auth-routes.js\u001b[2m:11:24)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[0m\u001b[36mservers/customer-services/modules/core-business/authentication/__tests__/routes/auth-routes.test.js\u001b[39m\u001b[0m\u001b[2m:8:20)\u001b[22m\n","testResults":[]},{"numFailingTests":0,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":0,"loadTestEnvironmentEnd":0,"loadTestEnvironmentStart":0,"runtime":0,"setupAfterEnvEnd":0,"setupAfterEnvStart":0,"setupFilesEnd":0,"setupFilesStart":0,"slow":false,"start":0},"testFilePath":"/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/modules/core-business/authentication/__tests__/controllers/auth-controller.test.js","failureMessage":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\n    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 1171 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\n     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\n     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\n\n      \u001b[2mat Schema.interpretAsType (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\n      \u001b[2mat Schema.path (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\n      \u001b[2mat Schema.add (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\n      \u001b[2mat new Schema (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\n      \u001b[2mat Schema.interpretAsType (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\n      \u001b[2mat Schema.path (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\n      \u001b[2mat Schema.add (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\n      \u001b[2mat new Schema (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\n      \u001b[2mat Object.require (\u001b[22mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\n      \u001b[2mat Object.require (\u001b[22mservers/customer-services/modules/core-business/authentication/services/direct-auth-service.js\u001b[2m:30:33)\u001b[22m\n      \u001b[2mat Object.require (\u001b[22mservers/customer-services/modules/core-business/authentication/controllers/auth-controller.js\u001b[2m:6:27)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[0m\u001b[36mservers/customer-services/modules/core-business/authentication/__tests__/controllers/auth-controller.test.js\u001b[39m\u001b[0m\u001b[2m:7:24)\u001b[22m\n","testResults":[]},{"numFailingTests":0,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":0,"loadTestEnvironmentEnd":0,"loadTestEnvironmentStart":0,"runtime":0,"setupAfterEnvEnd":0,"setupAfterEnvStart":0,"setupFilesEnd":0,"setupFilesStart":0,"slow":false,"start":0},"testFilePath":"/Users/eolaw/Desktop/insightserenity-platform/servers/customer-services/tests/integration/authentication.integration.test.js","failureMessage":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    TypeError: Invalid schema configuration: `addedAt` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.\n\n    \u001b[0m \u001b[90m 1170 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 1171 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1172 |\u001b[39m \u001b[36mconst\u001b[39m clientSchema \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSchema\u001b[39m(clientSchemaDefinition\u001b[33m,\u001b[39m {\n     \u001b[90m      |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 1173 |\u001b[39m     timestamps\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 1174 |\u001b[39m     toJSON\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[33m,\u001b[39m\n     \u001b[90m 1175 |\u001b[39m     toObject\u001b[33m:\u001b[39m { virtuals\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m }\u001b[0m\n\n      \u001b[2mat Schema.interpretAsType (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:1732:11)\u001b[22m\n      \u001b[2mat Schema.path (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\n      \u001b[2mat Schema.add (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:844:14)\u001b[22m\n      \u001b[2mat new Schema (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\n      \u001b[2mat Schema.interpretAsType (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:1661:29)\u001b[22m\n      \u001b[2mat Schema.path (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:1286:27)\u001b[22m\n      \u001b[2mat Schema.add (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:792:12)\u001b[22m\n      \u001b[2mat new Schema (\u001b[22mnode_modules/mongoose/lib/schema.js\u001b[2m:145:10)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22mshared/lib/database/models/customer-services/core-business/client-management/client-model.js\u001b[2m:1172:22)\u001b[22m\n      \u001b[2mat Object.require (\u001b[22mservers/customer-services/modules/core-business/billing/services/credit-management-service.js\u001b[2m:4:16)\u001b[22m\n      \u001b[2mat Object.require (\u001b[22mservers/customer-services/modules/core-business/authentication/services/direct-auth-service.js\u001b[2m:30:33)\u001b[22m\n      \u001b[2mat Object.require (\u001b[22mservers/customer-services/modules/core-business/authentication/controllers/auth-controller.js\u001b[2m:6:27)\u001b[22m\n      \u001b[2mat Object.require (\u001b[22mservers/customer-services/modules/core-business/authentication/routes/auth-routes.js\u001b[2m:11:24)\u001b[22m\n      \u001b[2mat Object.require (\u001b[22mservers/customer-services/modules/core-business/authentication/routes/index.js\u001b[2m:12:20)\u001b[22m\n      \u001b[2mat Object.require (\u001b[22mservers/customer-services/app.js\u001b[2m:46:20)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[0m\u001b[36mservers/customer-services/tests/integration/authentication.integration.test.js\u001b[39m\u001b[0m\u001b[2m:10:13)\u001b[22m\n","testResults":[]}],"config":{"bail":0,"changedFilesWithAncestor":false,"ci":false,"collectCoverage":true,"collectCoverageFrom":[],"coverageDirectory":"/Users/eolaw/Desktop/insightserenity-platform/tests/coverage","coverageProvider":"babel","coverageReporters":["html","text","lcov","json"],"coverageThreshold":{"global":{"branches":70,"functions":70,"lines":70,"statements":70}},"detectLeaks":false,"detectOpenHandles":false,"errorOnDeprecated":false,"expand":false,"findRelatedTests":false,"forceExit":false,"globalSetup":"/Users/eolaw/Desktop/insightserenity-platform/tests/config/global-setup.js","globalTeardown":"/Users/eolaw/Desktop/insightserenity-platform/tests/config/global-teardown.js","json":false,"lastCommit":false,"listTests":false,"logHeapUsage":false,"maxConcurrency":5,"maxWorkers":13,"noStackTrace":false,"nonFlagArgs":[],"notify":false,"notifyMode":"failure-change","onlyChanged":false,"onlyFailures":false,"openHandlesTimeout":1000,"passWithNoTests":false,"projects":[],"reporters":[["default",{}],["/Users/eolaw/Desktop/insightserenity-platform/node_modules/jest-html-reporters/index.js",{"publicPath":"./tests/reports","filename":"test-report.html","pageTitle":"InsightSerenity Platform - Test Report","expand":true,"openReport":false,"includeFailureMsg":true,"includeSuiteFailure":true}]],"rootDir":"/Users/eolaw/Desktop/insightserenity-platform","runInBand":false,"runTestsByPath":false,"seed":-368299019,"skipFilter":false,"snapshotFormat":{"escapeString":false,"printBasicPrototype":false},"testFailureExitCode":1,"testPathPatterns":{"patterns":[],"type":"TestPathPatterns"},"testSequencer":"/Users/eolaw/Desktop/insightserenity-platform/node_modules/@jest/test-sequencer/build/index.js","testTimeout":30000,"updateSnapshot":"new","useStderr":false,"verbose":true,"waitForUnhandledRejections":false,"watch":false,"watchAll":false,"watchman":true,"workerThreads":false,"coverageLinkPath":"../coverage/lcov-report/index.html"},"endTime":1767388728812,"_reporterOptions":{"publicPath":"./tests/reports","filename":"test-report.html","expand":true,"pageTitle":"InsightSerenity Platform - Test Report","hideIcon":false,"testCommand":"","openReport":false,"failureMessageOnly":0,"enableMergeData":false,"dataMergeLevel":1,"inlineSource":false,"urlForTestFiles":"","darkTheme":false,"includeConsoleLog":false,"stripSkippedTest":false,"includeFailureMsg":true,"includeSuiteFailure":true},"logInfoMapping":{},"attachInfos":{}})